# CST8503 Lab5 知识表示与规划

---

## 积木世界

## 概述

基于之前的实验经验，编写一个 Prolog 程序，实现积木领域的知识表示。

完成本实验后，你将练习以下能力：

- 从机器人的角度编写逻辑公理（Prolog 子句——事实或规则）来表示积木领域

- 使用知识表示和 Prolog 解决积木世界规划问题

- 使用图形跟踪工具观察程序执行

## 积木领域

我们将表示以下领域：

- 世界中有三个积木，分别命名为 block(a)、block(b)和 block(c)。

- 有四个位置可以放置这三个积木，分别命名为 position(1)、position(2)、position(3)和 position(4)。

- 如果某个位置或积木上方没有积木，则认为它是 clear（空置的）。

- 初始状态：积木 a 在位置 1 上，积木 b 在位置 3 上，积木 c 在积木 a 上。

- 机器人能够将空置的积木从其当前位置移动到新的空置位置或新的空置积木上。

## 世界的状态

现在，由于某些行为，我们世界的某些方面会发生变化。除了不受行为影响的语句外，我们还需要编写依赖于已发生行为的语句。为此，我们使用一种称为**流变元（fluent）**的谓词类型。流变元是一种在最后位置接受情境（动作列表）参数的谓词。直观地说，流变元用于陈述在（可能是空的）动作列表发生后什么是真的。

哪些流变元和常规谓词足以完全表示这个积木世界的状态？提示：思考领域描述中的前四个要点。

**Prolog 代码/注释**：为将表示上述积木世界状态的每个流变元名称和谓词名称写下声明性注释。

## 动作：世界如何改变

在这个世界中，哪些动作是相关的？我们只考虑机器人可以做的事情。提示：思考上面领域描述中的第五个要点。

写下与此世界相关的动作集合。提示：有一个动作表达式，参数位置中有变量。

## 前提条件公理

每个动作在什么条件下是可能的？我们将使用一个特殊的流变元，其声明性注释如下：

```
% poss([A|S]) 意味着在动作列表S（从右到左）执行后，动作A是可能的。
% 当我们熟悉这个概念后，我们可以说A在S中是可能的，
% 只要我们记住S不是世界可能处于的状态。
% 情境是一个动作列表，最早的动作在右侧，最近的动作在左侧。
```

**注意**：在情境演算中，poss 有两个参数，如 poss(A,S)，但由于动作序列从右到左读取，我们将发现使用列表[A|S]作为 poss/1 的单个参数很方便，因此 poss([A|S])将是我们在 Prolog 代码中使用的。

**Prolog 编码**：为领域中的每个动作写下前提条件公理。在这种情况下有一个动作模式，因此将有一个前提条件公理。

## 后继状态公理

每个动作发生后，状态如何改变（或不改变）？

**Prolog 编码**：为领域中的每个流变元写下后继状态公理（prolog 规则）。每一个都将具有以下形式：

```
fluentname(arg1, arg2, …, [A | S]) :-  % 注意[A|S]是一个情境，最近的动作是A
                                       % 本可以选择poss(A,S)，但我们选择了poss([A|S])
                                       % 也就是说，我们在上面定义了poss/1而不是poss/2
    poss([A|S]),
    (
        A = <使fluentname为真的动作>
    ;
        A \= <使fluentname为假的动作>,
        fluentname(arg1,arg2, …, S)
    ).
```

## 规划目标

编写并运行实现此领域的 prolog 程序（使用你上面编写的公理），包括一个 prolog 过程来实现规划以达到目标：

```
% plan(g(S),S) 意味着S是实现g的计划，其中g是依赖于情境S的目标状态。
plan(Goal,Plan) :- bposs(Plan), Goal.

bposs(S) :- tryposs([],S).

tryposs(S,S) :- poss(S).  % 注意这使用单参数poss
tryposs(X,S) :- tryposs([_|X],S).
```

用表示世界中状态的流变元写下各种目标状态：

- 你的机器人能否制定行动计划将积木 a 移动到位置 2？这对应于什么目标？

- 你的机器人能否制定行动计划将积木 a 移动到位置 3？这对应于什么目标？

## 演示

- 解释逻辑公理如何从机器人的角度表示积木领域

- 运行查询以证明你已使用知识表示和 Prolog 解决了积木世界规划问题

---

_本文档从 CST8503_Lab5_KR_Blocks.docx 翻译生成_
